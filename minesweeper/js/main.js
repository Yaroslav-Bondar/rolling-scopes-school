!function(){var e={476:function(e){e.exports={OPENED_CELL_STATE:"opened",MARKED_CELL_STATE:"marked",MINED_CELL_STATE:"mined",NUMBER_CELL_STATE:"number"}},101:function(e){e.exports={OPENED_CELL_COLOR:"rgb(237, 237, 237)",CLOSED_CELL_COLOR:"rgb(153, 153, 153)",INACTIVE_CELL_COLOR:"rgb(68, 68, 68)",AMOUNT_MINE_COLOR:"black",ERROR_CELL_COLOR:"tomato"}},693:function(e,t,i){const{Model:s}=i(146),{View:n}=i(996),{Controller:a}=i(15);new a(s,n)},15:function(e,t){t.Controller=class{#e;#t;constructor(e,t){this.#e=new e(10,10,10),this.#t=new t,this.#t.draw(this.#e.gameField),this.#i(this.#e.time),this.#s(this.#e.steps),this.#e.bindShowTime(this.#i),this.#e.bindShowSteps(this.#s),this.#e.bindShowWinStatus(this.#n),this.#e.bindShowLostGameStatus(this.#a),this.#e.bindDrawLostGame(this.#h),this.#e.bindCellChanged(this.#l),this.#e.bindHandleEndGame(this.#m),this.#t.bindOpenCell(this.#d),this.#t.bindMarkCell(this.#o)}#i=e=>{this.#t.showTime(e)};#s=e=>{this.#t.showSteps(e)};#n=e=>{this.#t.showWinStatus(e)};#a=e=>{this.#t.showLostGameStatus(e)};#h=e=>{this.#t.drawLostGame(e)};#m=()=>{this.#t.handleEndGame()};#l=(e,t)=>{this.#t.draw(e,t)};#d=(e,t)=>{this.#e.openCell(e,t)};#o=(e,t)=>{this.#e.markCell(e,t)}}},146:function(e,t,i){const{makeRandomNumber:s}=i(637),{OPENED_CELL_STATE:n,MARKED_CELL_STATE:a,MINED_CELL_STATE:h,NUMBER_CELL_STATE:l}=i(476);t.Model=class{#r=[];#E=!1;#C=!1;#w;#g;#u="win";#L="gameOver";#_;#c;#p;#S;#T=0;#I=0;#F=0;#b=0;#M={minutes:0,seconds:0};#G={[n]:!1,[a]:!1,[h]:!1,[l]:0};#i;#s;#n;#a;#h;#m;#l;constructor(e,t,i){if(e*t<=i)throw new Error("Wrong number of mines");this.#_=e,this.#c=t,this.#S=e*t,this.#p=i,this.#H()}bindCellChanged(e){this.#l=e}bindShowSteps(e){this.#s=e}bindShowTime(e){this.#i=e}bindShowWinStatus(e){this.#n=e}bindShowLostGameStatus(e){this.#a=e}bindDrawLostGame(e){this.#h=e}bindHandleEndGame(e){this.#m=e}get time(){return this.#M}get steps(){return this.#b}#A(){let e=Date.now(),t=0;this.#w=setInterval(function(){let i=Math.trunc((Date.now()-e)/1e3);60===i&&(i=0,e=Date.now(),t+=1);const s={minutes:t,seconds:i};this.#M={...s},this.#i(s)}.bind(this),1e3)}#O(){clearInterval(this.#w),this.#w=null}#H(){for(let e=0;e<this.#_;e+=1){this.#r[e]=[];for(let t=0;t<this.#c;t+=1)this.#r[e][t]={...this.#G}}}get gameField(){return this.#r}#N(e,t){for(let i=0;i<this.#p;i+=1){let i,n;do{i=s(this.#_),n=s(this.#c)}while(i===e&&n===t||!0===this.#r[i][n][h]);this.#r[i][n][h]=!0}}#D(){this.#r.forEach(this.#f.bind(this))}#f(e,t){e.forEach(((e,i)=>{this.#x(t,i).forEach((e=>this.#v(e,t,i)))}))}#v(e,t,i){const{rowIndex:s,cellIndex:n}=e;this.#r[s][n][h]&&(this.#r[t][i][l]+=1)}#x(e,t){const i=[];return this.#r[e][t-1]&&i.push({rowIndex:e,cellIndex:t-1}),this.#r[e-1]&&this.#r[e-1][t]&&i.push({rowIndex:e-1,cellIndex:t}),this.#r[e][t+1]&&i.push({rowIndex:e,cellIndex:t+1}),this.#r[e+1]&&this.#r[e+1][t]&&i.push({rowIndex:e+1,cellIndex:t}),this.#r[e+1]&&this.#r[e+1][t-1]&&i.push({rowIndex:e+1,cellIndex:t-1}),this.#r[e-1]&&this.#r[e-1][t-1]&&i.push({rowIndex:e-1,cellIndex:t-1}),this.#r[e-1]&&this.#r[e-1][t+1]&&i.push({rowIndex:e-1,cellIndex:t+1}),this.#r[e+1]&&this.#r[e+1][t+1]&&i.push({rowIndex:e+1,cellIndex:t+1}),i}openCell(e,t){this.#E||(this.#N(e,t),this.#E=!0),this.#C||(this.#D(),this.#C=!0),this.#r[e][t][n]||(this.#b+=1,this.#s(this.#b)),this.#r[e][t][h]&&!this.#r[e][t][a]?(this.#r[e][t][n]=!0,this.#F+=1,this.#O(),this.#g=this.#L,this.#h(this.#r),this.#a("Game over. Try again"),this.#m()):this.#r[e][t][n]||this.#r[e][t][a]||(this.#r[e][t][n]=!0,this.#F+=1,this.#w||this.#A(),0===this.#r[e][t][l]&&this.#W(e,t)),this.#I===this.#p&&this.#F+this.#I===this.#S&&(this.#O(),this.#g=this.#u,this.#n(`Win! You found all the mines in ${this.#M.minutes} minutes \n        ${this.#M.seconds} seconds and ${this.#b} moves!`),this.#m()),this.#g!==this.#L&&this.#l(this.#r)}#W(e,t){this.#x(e,t).forEach((e=>this.#R(e,this.#W.bind(this))))}#R(e,t){const{rowIndex:i,cellIndex:s}=e;this.#r[i][s][h]||this.#r[i][s][n]||(this.#r[i][s][n]=!0,this.#F+=1,this.#r[i][s][a]&&(this.#r[i][s][a]=!1),0===this.#r[i][s][l]&&t(i,s))}markCell(e,t){this.#r[e][t][n]||(this.#b+=1,this.#s(this.#b)),this.#r[e][t][n]||this.#r[e][t][a]||this.#r[e][t][h]?this.#r[e][t][n]||!this.#r[e][t][a]||this.#r[e][t][h]?this.#r[e][t][n]||this.#r[e][t][a]||!this.#r[e][t][h]?!this.#r[e][t][n]&&this.#r[e][t][a]&&this.#r[e][t][h]&&(this.#r[e][t][a]=!1,this.#T-=1,this.#I-=1):(this.#r[e][t][a]=!0,this.#T+=1,this.#I+=1):(this.#r[e][t][a]=!1,this.#T-=1):(this.#r[e][t][a]=!0,this.#T+=1),this.#I===this.#p&&this.#F+this.#I===this.#S&&(this.#O(),this.#g=this.#u,this.#n(`Win! You found all the mines in ${this.#M.minutes} minutes \n        ${this.#M.seconds} seconds and ${this.#b} moves!`)),this.#l(this.#r,this.#g)}}},996:function(e,t,i){const{OPENED_CELL_STATE:s,NUMBER_CELL_STATE:n,MINED_CELL_STATE:a,MARKED_CELL_STATE:h}=i(476),{OPENED_CELL_COLOR:l,CLOSED_CELL_COLOR:m,INACTIVE_CELL_COLOR:d,AMOUNT_MINE_COLOR:o,ERROR_CELL_COLOR:r}=i(101);t.View=class{#k="game-field";#P="playing field for the classic minesweeper game";#y="./assets/img/icons/naval-mine.png";#U="./assets/img/icons/flag.png";#$=40;#K=40;#B=30;#V=30;#X="20px serif";#Y=document.getElementById("root");#j=this.createElement({tag:"div",classes:["main"]});#q=this.createElement({tag:"div",classes:["main__container","container"]});#z=this.createElement({tag:"div",classes:["minesweeper"]});#J=this.createElement({tag:"div",classes:["minesweeper__container"]});#Q=this.createElement({tag:"div",classes:["minesweeper__game"]});#Z=this.createElement({tag:"div",classes:["minesweeper__display"]});#ee=this.createElement({tag:"output",classes:["minesweeper__game-status"]});#te=this.createElement({tag:"output",classes:["minesweeper__time"]});#ie=this.createElement({tag:"output",classes:["minesweeper__steps"]});#r=this.createElement({tag:"canvas",id:this.#k,classes:["minesweeper__game-field"]});#se=this.#r.getContext("2d");constructor(){this.#Q.prepend(this.#r),this.#J.prepend(this.#Q,this.#Z),this.#Z.prepend(this.#te,this.#ie,this.#ee),this.#z.append(this.#J),this.#q.append(this.#z),this.#j.append(this.#q),this.#r.textContent=this.#P,this.#Y.prepend(this.#j)}createElement(e={}){const{tag:t,id:i,classes:s,attributeName:n,attributeValue:a}=e,h=document.createElement(t);return i&&(h.id=i),s&&h.classList.add(...s),n&&a&&h.setAttribute(n,`${a}`),h}showTime(e={}){let{minutes:t,seconds:i}=e;t<10&&(t=`0${t}`),i<10&&(i=`0${i}`),this.#te.textContent=`Time: ${t}:${i}`}showSteps(e){this.#ie.textContent=`Steps: ${e}`}showWinStatus(e){this.#ee.textContent=e}showLostGameStatus(e){this.#ee.textContent=e}handleEndGame(){this.removeEventHandler(this.#r,"oncontextmenu"),this.removeEventHandler(this.#r,"onclick")}draw(e){const t=e.length,i=e[0].length;this.#r.width=this.#$*i,this.#r.height=this.#K*t,e.forEach(((e,t)=>{e.forEach(((e,i)=>{e[s]?this.#ne(t,i,e):e[h]?(this.#ae(t,i,this.#U),this.#he(t,i)):this.#he(t,i)}))}))}drawLostGame(e){e.forEach(((e,t)=>{e.forEach(((e,i)=>{e[s]||e[h]?this.#ne(t,i,e):this.#le(t,i),e[h]&&(this.#ae(t,i,this.#U),e[a]?this.#le(t,i):this.#me(t,i)),e[a]&&!e[h]&&(this.#ae(t,i,this.#y),e[s]?this.#me(t,i):this.#le(t,i))}))}))}#de(e,t,i){this.#se.strokeRect(t*this.#$,e*this.#K,this.#$,this.#K),this.#se.fillStyle=i,this.#se.fillRect(t*this.#$,e*this.#K,this.#$,this.#K)}#me(e,t){this.#de(e,t,r)}#le(e,t){this.#de(e,t,d)}#ae(e,t,i){const s=i=>{this.#se.drawImage(i,t*this.#$+(this.#$-this.#B)/2,e*this.#K+(this.#K-this.#V)/2,this.#B,this.#V)},n=new Image;n.src=i,n.onload=()=>{s(n)}}#ne(e,t,i){this.#de(e,t,l),i[n]>0&&(this.#se.textAlign="center",this.#se.textBaseline="middle",this.#se.font=this.#X,this.#se.fillStyle=o,this.#se.fillText(i[n],t*this.#$+this.#$/2,e*this.#K+this.#K/2))}#he(e,t){this.#de(e,t,m)}bindOpenCell(e){this.#r.onclick=t=>{this.#oe(t,e)}}bindMarkCell(e){this.#r.oncontextmenu=t=>{this.#oe(t,e)}}#oe(e,t){e.preventDefault();const i=e.offsetX,s=e.offsetY;t(Math.floor(s/this.#K),Math.floor(i/this.#$))}removeEventHandler(e,t){e[t]=null}}},637:function(e,t){t.makeRandomNumber=e=>Math.floor(Math.random()*e)}},t={};!function i(s){var n=t[s];if(void 0!==n)return n.exports;var a=t[s]={exports:{}};return e[s](a,a.exports,i),a.exports}(693)}();